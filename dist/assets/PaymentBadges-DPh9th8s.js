import{b as M,o as s,c as n,d as o,F as p,r as u,H as y,t as l,e as r,z as f,i as x,x as H,A as E,P as c,Q as L,j as C,a2 as D,w as S,D as T,k as N}from"../gn-invoice.js";const A={class:"payment-cell__methods"},B=["title"],P=["innerHTML"],F={key:0,class:"payment-breakdown"},V={class:"payment-breakdown__method"},$={class:"payment-breakdown__amount"},j={class:"payment-breakdown__date"},z={key:1,style:{color:"var(--color-text-tertiary)"}},I={__name:"PaymentBadges",props:{payments:{type:Array,default:()=>[]},totalAmount:{type:Number,default:0},filterMethod:{type:String,default:""},filterDateFrom:{type:String,default:""},filterDateTo:{type:String,default:""}},setup(_){const i=_,{tLabel:m}=M(),d=N(!1),h=T(()=>{const e={};return i.payments.forEach(t=>{e[t.method]||(e[t.method]=0),e[t.method]+=t.amount}),Object.entries(e).map(([t,a])=>({method:t,amt:a,label:c[t]?m(c[t]):t}))});function g(e){return i.filterMethod?e===i.filterMethod:!1}function v(e){return i.filterMethod?e.method===i.filterMethod:!1}function b(e,t){e.style.overflow="hidden",e.style.height="0",e.style.opacity="0",e.offsetHeight,e.style.transition="height 0.22s ease, opacity 0.22s ease",e.style.height=e.scrollHeight+"px",e.style.opacity="1",e.addEventListener("transitionend",()=>{e.style.height="",e.style.overflow="",e.style.transition="",e.style.opacity="",t()},{once:!0})}function k(e,t){e.style.overflow="hidden",e.style.height=e.scrollHeight+"px",e.style.opacity="1",e.offsetHeight,e.style.transition="height 0.18s ease, opacity 0.18s ease",e.style.height="0",e.style.opacity="0",e.addEventListener("transitionend",t,{once:!0})}return(e,t)=>h.value.length>0?(s(),n("div",{key:0,class:"payment-cell",onClick:t[0]||(t[0]=S(a=>d.value=!d.value,["stop"]))},[o("div",A,[(s(!0),n(p,null,u(h.value,a=>(s(),n("span",{key:a.method,class:y(["payment-badge",`payment-badge--${a.method}`,{"payment-badge--active":g(a.method)}])},l(a.label)+": "+l(r(f)(a.amt)),3))),128))]),o("span",{class:"payment-expand-btn",title:d.value?"Collapse":"Show breakdown"},[o("span",{class:"payment-expand-icon",innerHTML:r(x)(d.value?"minus":"plus",14)},null,8,P)],8,B),H(D,{css:!1,onEnter:b,onLeave:k},{default:E(()=>[d.value?(s(),n("div",F,[(s(!0),n(p,null,u(i.payments,(a,w)=>(s(),n("div",{key:w,class:y(["payment-breakdown__row",{"payment-breakdown__row--match":v(a)}])},[o("span",V,[o("span",{class:y(["payment-badge","payment-badge--xs",`payment-badge--${a.method}`])},l(r(c)[a.method]?r(m)(r(c)[a.method]):a.method),3)]),o("span",$,l(r(f)(a.amount)),1),o("span",j,l(r(L)(a.date)),1)],2))),128))])):C("",!0)]),_:1})])):(s(),n("span",z,"â€”"))}};export{I as _};
