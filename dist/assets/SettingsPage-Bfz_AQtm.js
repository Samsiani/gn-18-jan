import{a as G,b as q,a5 as O,p as J,o as m,c,d as e,t as n,e as a,i as p,f as V,j as k,x as w,g as i,$ as v,v as r,F as Q,r as W,_ as X,k as f,D as g,I as Y,O as Z,a4 as ee,w as te}from"../gn-invoice.js";import{_ as se,u as oe}from"./AppPagination-D5e3zrF_.js";import{_ as ae}from"./AppTabs-BcecfYq9.js";const le={class:"page-header"},ne={class:"page-header__title"},ie={class:"page-header__subtitle"},re={class:"page-header__actions"},ue=["innerHTML"],de={class:"card"},me={class:"card__body"},ce={class:"settings-form",style:{"margin-top":"var(--space-6)"}},pe={class:"form-grid"},ve={class:"form-group"},fe={class:"form-label"},_e={class:"form-group"},be={class:"form-label"},ge={class:"form-group"},he={class:"form-label"},ye={class:"form-group"},xe={class:"form-label"},ke={class:"form-group"},Te={class:"form-label"},Ve={class:"form-group"},we={class:"form-label"},Ne={class:"form-group"},Ue={class:"form-label"},Pe={class:"form-grid"},Ce={class:"form-group"},Me={class:"form-label"},Le={class:"form-group"},Se={class:"form-label"},He={class:"form-group"},Ie={class:"form-label"},$e={class:"form-group"},De={class:"form-label"},Fe={class:"form-grid"},ze={class:"form-group"},Be={class:"form-label"},Ke={class:"form-group"},Ae={class:"form-label"},Re=["innerHTML"],je={class:"form-group"},Ee={class:"form-label"},Ge=["innerHTML"],qe={class:"form-grid"},Oe={class:"form-group"},Je={class:"form-label"},Qe={class:"form-group"},We={class:"form-label"},Xe={class:"form-group",style:{"grid-column":"1/-1"}},Ye={class:"form-label"},Ze={style:{display:"flex","align-items":"flex-start","justify-content":"space-between","margin-bottom":"var(--space-4)",gap:"var(--space-4)","flex-wrap":"wrap"}},et={style:{"font-size":"var(--text-md)","font-weight":"600",margin:"0 0 2px 0"}},tt={style:{"font-size":"var(--text-sm)",color:"var(--color-text-secondary)",margin:"0"}},st=["innerHTML"],ot={key:0,class:"fictive-notice",style:{"margin-bottom":"var(--space-4)"}},at=["innerHTML"],lt={style:{display:"flex","align-items":"center",gap:"var(--space-3)","margin-bottom":"var(--space-4)","flex-wrap":"wrap"}},nt=["placeholder"],it={style:{"font-size":"var(--text-sm)",color:"var(--color-text-tertiary)"}},rt={class:"data-table-wrapper"},ut={class:"data-table trans-table"},dt={style:{width:"220px"}},mt={style:{"font-family":"monospace","font-size":"var(--text-xs)",color:"var(--color-text-tertiary)"}},ct={key:0,class:"trans-custom-dot"},pt={style:{"font-size":"var(--text-sm)",color:"var(--color-text-secondary)"}},vt=["value","onBlur"],ft={class:"text-center"},_t=["onClick"],bt=["innerHTML"],gt={style:{"max-width":"560px"}},ht={class:"form-group"},yt={class:"form-label"},xt={style:{"font-size":"var(--text-sm)",color:"var(--color-text-secondary)",margin:"0 0 var(--space-2) 0"}},kt=["placeholder"],Ut={__name:"SettingsPage",setup(Tt){const N=G(),{showToast:U}=Y(),{t:o}=q(),_=O(),u=f("company"),S=g(()=>[{id:"company",label:o("tab.company")},{id:"bank",label:o("tab.bank")},{id:"director",label:o("tab.director")},{id:"config",label:o("tab.config")},{id:"translations",label:o("tab.translations")},{id:"login",label:o("tab.loginPage")}]),l=f({}),{currentPage:h,totalPages:H,paginate:I,resetPage:$}=oe(50),y=f(""),T=f(!1),P=f(""),C=f("");let M=()=>{};const b=g(()=>{const d=_.allTranslations;if(!y.value)return d;const t=y.value.toLowerCase();return d.filter(s=>s.key.toLowerCase().includes(t)||s.en.toLowerCase().includes(t))}),D=g(()=>I(b.value)),F=g(()=>b.value.length===0?0:(h.value-1)*50+1),z=g(()=>Math.min(h.value*50,b.value.length)),B=Z(()=>$(),300);function K(){B()}function A(d,t){_.updateTranslation(d,t)}function R(d){_.resetTranslation(d)}function j(){P.value=o("translations.resetAllTitle"),C.value=o("translations.confirmReset"),M=()=>{_.resetAll()},T.value=!0}J(()=>{l.value={...N.company}});function E(){N.saveCompany({...l.value}),U("success",o("msg.settingsSaved"),o("msg.settingsSavedMsg"))}function L(d){U("info","Upload simulation",`${d} upload would open file picker`)}return(d,t)=>(m(),c("div",null,[e("div",le,[e("div",null,[e("h1",ne,n(a(o)("page.settings.title")),1),e("p",ie,n(a(o)("page.settings.subtitle")),1)]),e("div",re,[u.value!=="translations"?(m(),c("button",{key:0,class:"btn btn--primary",onClick:E},[e("span",{innerHTML:a(p)("save",16)},null,8,ue),V(" "+n(a(o)("btn.saveChanges")),1)])):k("",!0)])]),e("div",de,[e("div",me,[w(ae,{tabs:S.value,modelValue:u.value,"onUpdate:modelValue":t[0]||(t[0]=s=>u.value=s)},null,8,["tabs","modelValue"]),e("div",ce,[i(e("div",null,[e("div",pe,[e("div",ve,[e("label",fe,n(a(o)("form.companyName")),1),i(e("input",{class:"form-input","onUpdate:modelValue":t[1]||(t[1]=s=>l.value.name=s)},null,512),[[r,l.value.name]])]),e("div",_e,[e("label",be,n(a(o)("form.companyNameKa")),1),i(e("input",{class:"form-input","onUpdate:modelValue":t[2]||(t[2]=s=>l.value.nameKa=s)},null,512),[[r,l.value.nameKa]])]),e("div",ge,[e("label",he,n(a(o)("form.taxId")),1),i(e("input",{class:"form-input","onUpdate:modelValue":t[3]||(t[3]=s=>l.value.taxId=s)},null,512),[[r,l.value.taxId]])]),e("div",ye,[e("label",xe,n(a(o)("form.address")),1),i(e("input",{class:"form-input","onUpdate:modelValue":t[4]||(t[4]=s=>l.value.address=s)},null,512),[[r,l.value.address]])]),e("div",ke,[e("label",Te,n(a(o)("form.phone")),1),i(e("input",{class:"form-input","onUpdate:modelValue":t[5]||(t[5]=s=>l.value.phone=s)},null,512),[[r,l.value.phone]])]),e("div",Ve,[e("label",we,n(a(o)("form.email")),1),i(e("input",{class:"form-input","onUpdate:modelValue":t[6]||(t[6]=s=>l.value.email=s)},null,512),[[r,l.value.email]])]),e("div",Ne,[e("label",Ue,n(a(o)("form.website")),1),i(e("input",{class:"form-input","onUpdate:modelValue":t[7]||(t[7]=s=>l.value.website=s)},null,512),[[r,l.value.website]])])])],512),[[v,u.value==="company"]]),i(e("div",null,[e("div",Pe,[e("div",Ce,[e("label",Me,n(a(o)("form.bankName1")),1),i(e("input",{class:"form-input","onUpdate:modelValue":t[8]||(t[8]=s=>l.value.bankName1=s)},null,512),[[r,l.value.bankName1]])]),e("div",Le,[e("label",Se,n(a(o)("form.iban1")),1),i(e("input",{class:"form-input","onUpdate:modelValue":t[9]||(t[9]=s=>l.value.iban1=s)},null,512),[[r,l.value.iban1]])]),e("div",He,[e("label",Ie,n(a(o)("form.bankName2")),1),i(e("input",{class:"form-input","onUpdate:modelValue":t[10]||(t[10]=s=>l.value.bankName2=s)},null,512),[[r,l.value.bankName2]])]),e("div",$e,[e("label",De,n(a(o)("form.iban2")),1),i(e("input",{class:"form-input","onUpdate:modelValue":t[11]||(t[11]=s=>l.value.iban2=s)},null,512),[[r,l.value.iban2]])])])],512),[[v,u.value==="bank"]]),i(e("div",null,[e("div",Fe,[e("div",ze,[e("label",Be,n(a(o)("form.directorName")),1),i(e("input",{class:"form-input","onUpdate:modelValue":t[12]||(t[12]=s=>l.value.directorName=s)},null,512),[[r,l.value.directorName]])]),e("div",Ke,[e("label",Ae,n(a(o)("form.directorSignature")),1),e("div",{class:"upload-placeholder",onClick:t[13]||(t[13]=s=>L("signature"))},[e("span",{innerHTML:a(p)("upload",24)},null,8,Re),e("span",null,n(a(o)("form.uploadSignature")),1)])]),e("div",je,[e("label",Ee,n(a(o)("form.companyLogo")),1),e("div",{class:"upload-placeholder",onClick:t[14]||(t[14]=s=>L("logo"))},[e("span",{innerHTML:a(p)("upload",24)},null,8,Ge),e("span",null,n(a(o)("form.uploadLogo")),1)])])])],512),[[v,u.value==="director"]]),i(e("div",null,[e("div",qe,[e("div",Oe,[e("label",Je,n(a(o)("form.invoicePrefix")),1),i(e("input",{class:"form-input","onUpdate:modelValue":t[15]||(t[15]=s=>l.value.invoicePrefix=s)},null,512),[[r,l.value.invoicePrefix]])]),e("div",Qe,[e("label",We,n(a(o)("form.startingNumber")),1),i(e("input",{class:"form-input",type:"number","onUpdate:modelValue":t[16]||(t[16]=s=>l.value.startingInvoiceNumber=s)},null,512),[[r,l.value.startingInvoiceNumber,void 0,{number:!0}]])]),e("div",Xe,[e("label",Ye,n(a(o)("form.reservationDays",{days:l.value.reservationDays})),1),i(e("input",{type:"range",min:"1",max:"90","onUpdate:modelValue":t[17]||(t[17]=s=>l.value.reservationDays=s),style:{width:"100%"}},null,512),[[r,l.value.reservationDays,void 0,{number:!0}]])])])],512),[[v,u.value==="config"]]),i(e("div",null,[e("div",Ze,[e("div",null,[e("h3",et,n(a(o)("translations.title")),1),e("p",tt,n(a(o)("translations.subtitle")),1)]),e("button",{class:"btn btn--danger btn--sm",onClick:j},[e("span",{innerHTML:a(p)("rotate-ccw",14)},null,8,st),V(" "+n(a(o)("translations.resetAll")),1)])]),a(_).locale!=="ka"?(m(),c("div",ot,[e("span",{innerHTML:a(p)("info",14)},null,8,at),V(" "+n(a(o)("translations.switchToGeo")),1)])):k("",!0),e("div",lt,[i(e("input",{type:"text",class:"form-input form-input--search","onUpdate:modelValue":t[18]||(t[18]=s=>y.value=s),onInput:K,placeholder:a(o)("translations.searchPlaceholder"),style:{flex:"1","max-width":"360px"}},null,40,nt),[[r,y.value]]),e("span",it,n(a(o)("translations.showing",{from:F.value,to:z.value,total:b.value.length})),1)]),e("div",rt,[e("table",ut,[e("thead",null,[e("tr",null,[e("th",dt,n(a(o)("translations.colKey")),1),e("th",null,n(a(o)("translations.colEnglish")),1),e("th",null,n(a(o)("translations.colGeorgian")),1),t[23]||(t[23]=e("th",{style:{width:"44px"}},null,-1))])]),e("tbody",null,[(m(!0),c(Q,null,W(D.value,s=>(m(),c("tr",{key:s.key},[e("td",null,[e("span",mt,n(s.key),1),s.isCustom?(m(),c("span",ct,"â—")):k("",!0)]),e("td",pt,n(s.en),1),e("td",null,[e("input",{type:"text",class:"form-input form-input--sm trans-input",value:s.ka,onBlur:x=>A(s.key,x.target.value),onKeydown:t[19]||(t[19]=ee(te(x=>x.target.blur(),["prevent"]),["enter"]))},null,40,vt)]),e("td",ft,[s.isCustom?(m(),c("button",{key:0,class:"btn btn--ghost btn--icon btn--sm",onClick:x=>R(s.key),"data-tooltip":"Reset"},[e("span",{innerHTML:a(p)("x",12)},null,8,bt)],8,_t)):k("",!0)])]))),128))])])]),w(se,{currentPage:a(h),totalPages:a(H),total:b.value.length,onPageChange:t[20]||(t[20]=s=>h.value=s)},null,8,["currentPage","totalPages","total"])],512),[[v,u.value==="translations"]]),i(e("div",null,[e("div",gt,[e("div",ht,[e("label",yt,n(a(o)("form.loginFooterNote")),1),e("p",xt,n(a(o)("form.loginFooterNoteHint")),1),i(e("textarea",{class:"form-textarea","onUpdate:modelValue":t[21]||(t[21]=s=>l.value.loginFooterNote=s),rows:"3",placeholder:a(o)("page.login.footer")},null,8,kt),[[r,l.value.loginFooterNote]])])])],512),[[v,u.value==="login"]])])])]),w(X,{visible:T.value,"onUpdate:visible":t[22]||(t[22]=s=>T.value=s),title:P.value,message:C.value,danger:!0,onConfirm:a(M)},null,8,["visible","title","message","onConfirm"])]))}};export{Ut as default};
