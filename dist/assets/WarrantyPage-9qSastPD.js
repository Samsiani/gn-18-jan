import{a as S,m as T,b as z,o as r,c as i,d as t,t as e,e as n,x as D,A as M,f as b,F as w,i as f,Q as H,j as x,r as V,D as u,E as q,l as E}from"../gn-invoice.js";const P={key:0,class:"empty-state"},W={class:"page-header no-print"},$={style:{display:"flex","align-items":"center",gap:"var(--space-4)"}},A=["title","innerHTML"],F={class:"page-header__title"},j={class:"page-header__subtitle",style:{margin:"0"}},Q={class:"page-header__actions"},R=["innerHTML"],G={class:"card"},J={class:"card__body"},K={class:"invoice-view",style:{padding:"0"}},O={style:{"text-align":"center","margin-bottom":"var(--space-6)"}},U={class:"invoice-view__company-name"},X={style:{margin:"var(--space-3) 0 var(--space-1)","font-size":"var(--text-xl)"}},Y={style:{"font-size":"var(--text-sm)",color:"var(--color-text-secondary)"}},Z={key:0,style:{"font-size":"var(--text-sm)",color:"var(--color-text-secondary)","margin-top":"var(--space-1)"}},tt={class:"table-scroll-wrapper"},et={class:"invoice-view__items-table"},nt={key:0,style:{"font-size":"var(--text-xs)",color:"var(--color-text-tertiary)"}},ot={style:{"margin-top":"var(--space-6)","font-size":"var(--text-sm)",color:"var(--color-text-secondary)","line-height":"var(--line-height-relaxed)"}},at={style:{"margin-top":"var(--space-2)"}},st={class:"invoice-view__footer"},rt={style:{"margin-bottom":"var(--space-1)"}},it={class:"invoice-view__signature-line"},ct={__name:"WarrantyPage",props:{id:[String,Number]},setup(_){const p=_,k=E(),v=S(),I=T(),{t:o}=z(),a=u(()=>v.invoiceById(p.id)),y=u(()=>v.company),h=u(()=>a.value?v.customerById(a.value.customerId):null),B=u(()=>a.value?.items.some(s=>s.warranty)||!1),C=u(()=>a.value?.items.filter(s=>s.warranty)||[]);function m(s){return v.productById(s)}function N(){I.navigateBack(k,`/invoices/${p.id}`)}function L(){const s=document.title;document.title=`Warranty - ${a.value.number}`;const l=document.querySelector(".invoice-view"),c=document.createElement("div");c.id="warranty-print-portal",c.appendChild(l.cloneNode(!0)),document.body.appendChild(c),document.body.classList.add("printing-warranty"),window.onafterprint=()=>{document.title=s,document.body.classList.remove("printing-warranty"),document.body.removeChild(c),window.onafterprint=null},window.print()}return(s,l)=>{const c=q("router-link");return r(),i("div",null,[!a.value||!B.value?(r(),i("div",P,[t("h3",null,e(n(o)("page.warranty.notAvailable")),1),D(c,{to:`/invoices/${_.id}`,class:"btn btn--primary"},{default:M(()=>[b(e(n(o)("btn.backToInvoice")),1)]),_:1},8,["to"])])):(r(),i(w,{key:1},[t("div",W,[t("div",$,[t("button",{class:"btn btn--ghost btn--icon",onClick:N,title:n(o)("btn.back"),innerHTML:n(f)("arrow-left")},null,8,A),t("div",null,[t("h1",F,e(n(o)("page.warranty.title")),1),t("p",j,e(a.value.number),1)])]),t("div",Q,[t("button",{class:"btn btn--primary",onClick:L},[t("span",{innerHTML:n(f)("printer",16)},null,8,R),b(" "+e(n(o)("btn.print")),1)])])]),t("div",G,[t("div",J,[t("div",K,[t("div",O,[t("div",U,e(y.value.name),1),t("h2",X,e(n(o)("page.warranty.title")),1),t("div",Y,e(n(o)("common.invoice"))+" "+e(a.value.number)+"  |  "+e(n(o)("common.date"))+" "+e(a.value.soldDate?n(H)(a.value.soldDate):"—"),1),h.value?(r(),i("div",Z,e(n(o)("common.buyer"))+" "+e(h.value.name),1)):x("",!0)]),t("div",tt,[t("table",et,[t("thead",null,[t("tr",null,[l[0]||(l[0]=t("th",null,"#",-1)),t("th",null,e(n(o)("col.product")),1),t("th",null,e(n(o)("col.brand")),1),t("th",null,e(n(o)("col.qty")),1),t("th",null,e(n(o)("col.warranty")),1)])]),t("tbody",null,[(r(!0),i(w,null,V(C.value,(d,g)=>(r(),i("tr",{key:g},[t("td",null,e(g+1),1),t("td",null,[t("strong",null,e(m(d.productId)?.name||n(o)("common.unknown")),1),m(d.productId)?(r(),i("div",nt,e(m(d.productId).sku),1)):x("",!0)]),t("td",null,e(m(d.productId)?.brand||"—"),1),t("td",null,e(d.qty),1),t("td",null,e(d.warranty),1)]))),128))])])]),t("div",ot,[t("strong",null,e(n(o)("page.warranty.terms")),1),t("p",at,e(n(o)("page.warranty.termsText")),1)]),t("div",st,[l[1]||(l[1]=t("div",null,null,-1)),t("div",null,[t("div",rt,e(n(o)("common.seller"))+" "+e(y.value.directorName),1),t("div",it,e(n(o)("common.signature")),1)])])])])])],64))])}}};export{ct as default};
